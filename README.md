
# Домашнее задание к занятию «Микросервисы: масштабирование»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развёртывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- поддержка контейнеров;
- обеспечивать обнаружение сервисов и маршрутизацию запросов;
- обеспечивать возможность горизонтального масштабирования;
- обеспечивать возможность автоматического масштабирования;
- обеспечивать явное разделение ресурсов, доступных извне и внутри системы;
- обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п.

Обоснуйте свой выбор.

Абсолютно всем критериям соответствует Kubernetes причем из коробки:  
- Kubernetes поддерживает различные среды для запуска контейнеров: Docker, containerd, CRI-O, и любые реализации Kubernetes CRI (Container Runtime Interface).  
- Кластерный DNS — это DNS-сервер наряду с другими DNS-серверами в вашем окружении, который обновляет DNS-записи для сервисов Kubernetes. Контейнеры, запущенные посредством Kubernetes, автоматически включают этот DNS-сервер в свои DNS.  
- У автомасштабирования в Kubernetes два измерения: автомасштабирование кластера (Cluster Autoscaler), которое отвечает за масштабирование узлов и горизонтальное автомасштабирование подов (Horizontal Pod Autoscaler, HPA), которое автоматически масштабирует количество подов в развертывании или наборе реплик. Также в зависимости от нагрузки Kubernetes сам будет поддерживать min либо max количество запущенных экземпляров сервиса.  
- В кубере есть такая сущность, как Namespaces (Пространство имен) — это способ разделения ресурсов кластера между несколькими пользователями. Также если мы хотим контролировать поток трафика на уровне IP-адреса или порта для протоколов TCP, UDP и SCTP, можно рассмотреть использовать Kubernetes NetworkPolicies для определенных приложений в кластере. Еще есть Ingress-контроллер — pod, который реализует правила, описанные в Ingress (свод правил, в которых описано, как внешний трафик получает доступ к сервисам в кластере).  
- Для безопастности там есть объект - secret для хранения чувствительных данных и vault.  

Таким образом Кубер - самое лучшее решение для поставленной задачи. Но и здесь есть пространство для маневра: Ставить кластер кубер на железные сервера или использовать кубер от облачных провайдеров со своими плюшками, но которые не мигрируют из облака на землю, если вы захотите обзавестить собственными мощностями. Также есть платформы, вроде  Deckhouse от Фланта, со своими плюшками.


Ссылки, которые использовал:  
[раз](https://kubernetes.io/ru/docs/concepts/overview/components/)  
[два](https://kubernetes.io/ru/docs/concepts/overview/working-with-objects/namespaces/)  
[три](https://kubernetes.io/docs/concepts/services-networking/network-policies/)  
[четыре](https://habr.com/ru/companies/slurm/articles/658123/)  
[пять](https://habr.com/ru/companies/otus/articles/457742/)  
[шесть](https://habr.com/ru/companies/flant/articles/569840/)  
